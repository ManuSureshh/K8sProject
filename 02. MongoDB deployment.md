## Since our 3 Tier application depends on Database, we need to deploy it first.
### Step 01: - Create a secret for MongoDB.
- Below are the credentials
  Username: - admin
  Password: - Avaya@123
- But we should not send a credentials as plain text. We should send them encoded.
  ```
  echo 'admin' | base64
  ```
  ```
  echo 'Avaya@123' | base64
  ``` 
<br>

![image](https://github.com/user-attachments/assets/9de62719-b303-466b-86ca-eb6458c4914c)

<br>
- We should use this encoded values inside our `secret.yaml` file.
```
apiVersion: v1
kind: Secret
metadata:
  namespace: 3-tier-app
  name: mongo-sec
type: Opaque
data:
  password: QXZheWFAMTIzCg==
  username: YWRtaW4K
```

<br>

![image](https://github.com/user-attachments/assets/59a26726-80f1-426e-9ab6-bc10caae60b5)

<br>

![image](https://github.com/user-attachments/assets/ff52d479-ab54-4029-8fbc-f32a5fc4f259)

<br>

## Step02: - Create PV and PVC (Storage) for the Pods
- There are different ways to achieve this.
  - HostPath
  - EmptyDir
  - CloudDisk
  - External Storage (NFS)
- For time being we are using HostPath as a storage for PV and PVC.

```
sudo nano pv.yaml
```

```
apiVersion: v1
kind: PersistentVolume
metadata:
  name: mongo-pv
  namespace: 3-tier-app
spec:
  capacity: 
    storage: 1Gi
  volumeMode: Filesystem
  accessModes:
    - ReadWriteOnce
  hostPath:
    path: /data/db
```

```
sudo nano pvc.yaml
```

```
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: mongo-volume-claim
  namespace: 3-tier-app
spec: 
  accessModes:  
    - ReadWriteOnce
  storageClassName: ""
  resources:
    requests:
      storage: 1Gi
```

```
kubectl apply -f pv.yaml
```
```
kubectl apply -f pvc.yaml
```
```
kubectl get pv
```
```
kubectl get pvc
```
